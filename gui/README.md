# 智能水產養殖自動餵料控制系統 GUI 使用說明

## 快速開始

### 1. 環境準備
確保您的系統已安裝：
- Python 3.8 或更高版本
- 必要的Python庫（詳見 requirements.txt）

### 2. 安裝依賴
```bash
pip install -r requirements.txt
```

### 3. 啟動GUI
```bash
# 啟動GUI啟動器（推薦）
python launch_gui.py

# 或直接啟動主GUI
python launch_gui.py --main-gui

# 或啟動配置編輯器
python launch_gui.py --config

# 或啟動日誌查看器  
python launch_gui.py --log
```

### 4. 測試系統
```bash
python test_gui.py
```

## GUI組件介紹

### 主要GUI (`main_gui.py`)
- **功能**: 系統主控制界面
- **特點**: 
  - 實時數據監控
  - 參數即時調整
  - 多頁圖表顯示
  - 手動控制功能
  - 模擬模式支援

**主要功能區域:**
1. **系統控制區**: 啟動/停止系統，模式選擇
2. **系統狀態區**: 實時狀態指示燈
3. **實時數據區**: H值、PWM、特徵值顯示
4. **參數調整區**: 滑桿即時調整系統參數
5. **手動控制區**: PWM手動輸出、手動餵食
6. **圖表顯示區**: 
   - 主要圖表：H值與PWM時序圖
   - 特徵分析：ME、RSI、POP、FLOW變化
   - 系統分析：相關性與性能指標

### 系統模擬器 (`simulator.py`)
- **功能**: PC端模擬真實硬體環境
- **特點**:
  - 魚群活躍度變化模擬
  - 特徵值波動模擬
  - PWM控制響應模擬
  - 系統狀態轉換模擬

### 配置編輯器 (`config_editor.py`)
- **功能**: 系統參數配置界面
- **特點**:
  - 分類配置頁面
  - 參數類型驗證
  - 配置文件導入/匯出
  - 預設值恢復

**配置分類:**
1. **硬體配置**: PWM、相機、GPIO設定
2. **控制配置**: 時間參數、門檻值、PI控制器
3. **視覺配置**: CLAHE、ROI區域設定
4. **特徵配置**: 融合權重、正規化參數
5. **驗證配置**: 驗證門檻、測試參數

### 日誌查看器 (`log_viewer.py`)
- **功能**: 系統運行數據分析
- **特點**:
  - 多格式日誌支援（CSV、Excel、文本）
  - 時間範圍篩選
  - 統計分析計算
  - 多維度圖表顯示

**分析功能:**
1. **時序分析**: H值、PWM、特徵值時間變化
2. **相關性分析**: H值與PWM相關性、特徵相關矩陣
3. **分布分析**: 數值分布直方圖、箱線圖

## 使用流程

### 模擬模式測試
1. 啟動 `launch_gui.py`
2. 點擊「啟動主要GUI」
3. 選擇「模擬模式」
4. 點擊「啟動系統」
5. 觀察實時數據和圖表變化
6. 調整參數觀察系統響應

### 配置調整
1. 啟動配置編輯器
2. 修改相關參數
3. 保存配置文件
4. 在主GUI中載入新配置

### 數據分析
1. 運行系統收集數據
2. 啟動日誌查看器
3. 載入數據文件
4. 查看統計分析和圖表
5. 匯出分析報告

## 參數說明

### 控制參數
- `H_hi`: 高活躍度門檻 (預設: 0.65)
- `H_lo`: 低活躍度門檻 (預設: 0.35) 
- `Kp`: PI控制器比例增益 (預設: 15.0)
- `Ki`: PI控制器積分增益 (預設: 2.0)
- `t_feed`: 餵食時間窗 (預設: 0.6秒)
- `t_eval`: 評估時間窗 (預設: 3.0秒)

### 特徵融合權重
- `α (alpha)`: RSI權重 (預設: 0.4)
- `β (beta)`: POP權重 (預設: 0.3)
- `γ (gamma)`: FLOW權重 (預設: 0.2)
- `δ (delta)`: ME權重 (預設: 0.1)

**融合公式**: H = α·RSI + β·POP + γ·FLOW − δ·ME

### 硬體限制
- PWM輸出範圍: 20% - 70%
- 相機解析度: 1920x1080 @ 60fps
- ROI區域: roi_bub (氣泡區) / roi_ring (環形區)

## 驗證指標

系統自動驗證以下性能指標：
1. **相關係數**: r(H, PWM) ≥ 0.75
2. **PWM振盪**: 振盪幅度 ≤ ±15%
3. **反應時間**: 故障降級 ≤ 1秒
4. **命中率**: T_disappear ≥ 70%

## 故障排除

### 常見問題
1. **導入錯誤**: 執行 `pip install -r requirements.txt`
2. **GUI無法啟動**: 檢查tkinter是否安裝
3. **圖表不顯示**: 檢查matplotlib後端設定
4. **模擬器無響應**: 重啟主GUI

### 測試步驟
1. 運行 `python test_gui.py` 檢查系統狀態
2. 查看測試輸出確認所有組件正常
3. 如有錯誤，按照提示修復

## 技術規格

- **開發語言**: Python 3.8+
- **GUI框架**: tkinter
- **圖表庫**: matplotlib
- **數據處理**: pandas, numpy
- **配置格式**: YAML
- **支援平台**: Windows, Linux, macOS

## 版本信息

- **版本**: v1.0
- **更新日期**: 2025年
- **開發團隊**: Aqua Feeder Team
